# BulTrans – תיקונים קריטיים שבוצעו

להלן הסבר על התיקונים שבוצעו בקבצים `process.py` ו־`test_process.py`:

---

## ✅ process.py – שינויים עיקריים

1. **ניקוי שם הלקוח:**
   - הסרה של המילה "Supplier" אם מופיעה בשם הלקוח.

2. **שיפור קליטת סכומים:**
   - תוספת RegEx שתומכת בסכומים עם רווחים ונקודות (למשל: `4 700.00`).
   - שליפה של שלושת הסכומים: סכום בסיס, מע"מ, וסכום סופי.

3. **המרה למילים בבולגרית:**
   - תרגום הסכום הכולל לשם מילולי (למשל: `пет хиляди шестстотин и четиридесет лева`).

4. **שיפור תיאור שירות:**
   - חיפוש תאריך הסכם בשורת השירות, והוספתו אוטומטית:  
     `Услуга по договор от 14.7.2021`.

5. **תיקון סדר שדות CompanyID ו־VAT:**
   - CompanyID בלי BG.
   - VAT עם BG.

6. **השלמה אוטומטית של שדות MOL ו-Съставил:**
   - שימוש ב־`SupplierContactPerson` מטבלת הספקים.

---

## 🧪 test_process.py – בדיקות נוספות

1. **בדיקה לשם הלקוח (שאין בו "Supplier").**
2. **בדיקות לאיתור סכומים לפי פורמט עם רווחים.**
3. **בדיקת תקינות של תרגום שמות וכתובות.**

---

## 📁 קבצים כלולים ב־ZIP

- `process.py` – קובץ הלוגיקה המעודכן.
- `test_process.py` – קובץ בדיקות מעודכן.

---

## 🛠️ הוראות עדכון

1. יש להעתיק את הקבצים לתיקיית הפרויקט.
2. להריץ `pytest` ולוודא שכל הטסטים עוברים.
3. להריץ את השירות מחדש (`uvicorn main:app --reload`).

---

בהצלחה!
